---
title: UBloodStainSubsystem
category: 3. Blueprint API
order: 1
---

[StartRecording](#section1)



## Overview

`UBloodStainSubSystem`는 저희 플러그인의 Replay System에 파일에 대한 관리, Record와 Playback에 대한 관리를 담당하는 SubSystem입니다.

저희 플러그인의 핵심 기능을 담당하며, 대부분의 API를 제공하고 있습니다.


<br/>


## References

| Plugin | `BloodStainSystem` |
| Module | `BloodStainSystem` |
| Header | `#include "BloodStainSubSystem.h"` |
| Source | `/Plugins/BloodStainSystem/Source/BloodStainSystem/Private/BloodStainSubSystem.cpp` |
| Super Class | `UGameInstanceSubsystem` |

<br/>


## Properties

| Type | Name | Description |
|------------------|------------------|------------------------------|
| FileSaveOptions | FBloodStainFileOptions | File의 Save Option에 대한 프로퍼티입니다. |
| OnCompleteBuildRecordingHeader | FOnBuildRecordingHeader | File을 저장하기 직전, Broadcast를 합니다. 이를 사용해 Header Data를 수정, 대입할 수 있습니다. |

<br/>


## Functions


<a id="section1"></a>

### Start Recording

<img src="../../images/BloodStainSubSystem/StartRecording.png" width="300" />	


#### Description

>If the group is already recording, join the group <br>
Record Component is Attached to the Target Actor

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| AActor* | Target Actor | The actor to record |
| FRecordOptions (Optional) | Options | Optional recording options |

#### Outputs

| Type | Name | Description |
|------|------|-------------|
| bool | Return Value | Whether the recording start is successful. If Actor is Already Recording for Target Group (Option), return false. <br/> 예상치 못한 오류 가능성 - 다른 Group에서 녹화중인 경우 이에 대해 대응에 대해 예상이 안됨. (테스트 못해봄) |

<br>




## Start Recording With Actors
<img src="../../images/BloodStainSubSystem/StartRecordingWithActors.png" width="300" />	

#### Description

>If the group is already recording, join the group <br>
Record Component is Attached to the Target Actor

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| TArray&lt;AActor*&gt; | Target Actors | The actors to record |
| FRecordOptions (Optional) | Options | Optional recording options |

#### Outputs

| Type | Name | Description |
|------|------|-------------|
| bool | Return Value | whether the recording start is successful |

<br>





## Stop Recording
<img src="../../images/StopRecording.png" width="300" />

#### Description

>Stop Recording Group


#### Inputs

| Type | Name | Description |
|------|------|-------------|
| FName (Optional) | Group Name | Optional group name for organizing recordings |
| bool | Save Recording Data | if false, do not save |

<br>




## Stop Recording RecordComponent
<img src="../../images/StopRecordingRecordComponent.png" width="300" />

#### Description

>Stop recording actor.<br>
Group don't stop recording. if you want to stop recording group, use `UBloodStainSubsystem::StopRecord`


#### Inputs

| Type | Name | Description |
|------|------|-------------|
| URecordComponent | Record Component | Target Record Component |
| bool | Save Recording Data | if false, do not save |

<br>




## Start Replay From File
<img src="../../images/StartReplayFromFile.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| FString | File Name | File Name |
| FString | Level Name | Level Name |
| FBloodStainPlaybackOptions (Optional) | In Playback Options | Optional playback options |


#### Outputs

| Type | Name | Description |
|------|------|-------------|
| FGuid | Out Guid | Replaying Group Key |
| bool | return value | whether the start replay is successful |

<br>


## Start Replay by BloodStain
<img src="../../images/StartReplaybyBloodStain.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| ABloodStainActor* | Blood Stain Actor | BloodStain Actor |


#### Outputs

| Type | Name | Description |
|------|------|-------------|
| FGuid | Out Guid | Replaying Group Key |
| bool | return value | whether the start replay is successful |

<br>



## Stop Replay
<img src="../../images/StopReplay.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| FGuid | Playback Key | Target Playback Key |

<br>



## Stop Replay PlayComponent
<img src="../../images/StopReplayplayComponent.png" width="300" />

#### Description

>This don't stop All Actors Playback. if you want to stop All of them, use `UBloodStainSubsystem::StopReplay`


#### Inputs

| Type | Name | Description |
|------|------|-------------|
| AReplayActor* | Ghost Actor | Target Playback ReplayActor |

<br>



## GetPlaybackGroup

<img src="../../images/BloodStainSubSystem/GetPlaybackGroup.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| FGuid | In Guid | Playback Key |


#### Outputs

| Type | Name | Description |
|------|------|-------------|
| FBloodStainPlaybackGroup& | OutBloodStainPlaybackGroup | Replaying Playback Group |
| bool | return value | Whether the Playback Group is Exist |

<br>



## Is Playing
<img src="../../images/BloodStainSubSystem/IsPlaying.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| FGuid | InPlaybackKey | Playback Key |


#### Outputs

| Type | Name | Description |
|------|------|-------------|
| bool | return value | Whether the Playback Group is Replaying |

<br>



## SetRecordingGroupMainActor

<img src="../../images/BloodStainSubSystem/SetRecordingGroupMainActor.png" width="300" />

#### Description

> TODO

#### Inputs

| Type | Name | Description |
|------|------|-------------|
| AActor* | Target Actor | Group의 Main Actor |
| FName (Optional) | GroupName | Optional Group의 Main Actor |

<br>





# TODO - Function 

LoadAllHeadersInLevel
LoadAllHeadersInLevels
LoadAllHeaders

FindOrLoadRecordHeader
FindOrLoadRecordBodyData

IsFileHeaderLoaded
IsFileBodyLoaded

GetCachedHeaders
GetCachedHeadersByTags

ClearCachedData
ClearCachedBodyData

ClearAllCachedData
ClearAllCachedBodyData

DeleteFile

SetDefaultGroupName

SetReplayUserGroupData

GetFullFilePath
GetRelativeFilePath

GetSavedLevelNames
GetSavedFileNames

SetDefaultMaterial
GetDefaultMaterial

SpawnBloodStain
SpawnAllBloodStainInLevel




AddToPendingGroup
AddToPendingGroupWithActors

RemoveFromPendingGroup
RemoveFromPendingGroupWithActors

StartRecordingWithPendingGroup

SetPendingGroupMainActor

SetPendingActorUserData


<!-- <br><br><br><br><br><br><br>

# 테스트

#### Parameters
- **Target** (`UBloodStainSubsystem*`): The subsystem that manages the recording
- **Target Actor** (`AActor*`): The actor to be recorded
- **Options** (`FRecordOptions`, *optional*): Additional record settings
- **Group Name** (`FName`, *optional*): Name of the recording group


| Name | Type | Description |
|------|------|-------------|
| Target | UBloodStainSubsystem* | The subsystem that controls recording |
| Target Actor | AActor* | The actor to record |
| Options | FRecordOptions (Optional) | Optional recording options |
| Group Name | FName (Optional) | Optional group name for organizing recordings |


#### Returns
- **Return Value** (`bool`): `true` if recording started successfully, otherwise `false`.
- **Out Guid** (`FGuid`): The key identifying the replay group that started.


### Start Recording

Starts recording a specific actor in the scene.  
If the specified group is already recording, the actor is added to that group.  
Attaches a `RecordComponent` to the target actor to begin tracking.

Use `StopRecording` to finish and optionally save the recorded data. -->